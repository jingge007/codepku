!function(a,b,c){function d(b,c){switch(this.$content=a(b),this.options=c,this.index=emoji_index,c.animation){case"none":this.showFunc="show",this.hideFunc="hide",this.toggleFunc="toggle";break;case"slide":this.showFunc="slideDown",this.hideFunc="slideUp",this.toggleFunc="slideToggle";break;case"fade":this.showFunc="fadeIn",this.hideFunc="fadeOut",this.toggleFunc="fadeToggle";break;default:this.showFunc="fadeIn",this.hideFunc="fadeOut",this.toggleFunc="fadeToggle"}this._init()}function e(b){return emoji_index++,this.each(function(){var c=a(this),e=c.data("plugin_"+f+emoji_index),h=a.extend({},g,c.data(),"object"==typeof b&&b);e||c.data("plugin_"+f+emoji_index,e=new d(this,h)),"string"==typeof b&&e[b]()})}var f="emoji",g={showTab:!0,animation:"fade",icons:[]};b.emoji_index=0,d.prototype={_init:function(){var b,d,e,f,g,h=this,i=this.options.button,j=h.index;i||(b='<input type="image" class="emoji_btn" id="emoji_btn_'+j+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMjBGQkY1RTE0NTExRTdBNTM3QUFCRjdEOUI4MTk5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyMjBGQkY2RTE0NTExRTdBNTM3QUFCRjdEOUI4MTk5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTIyMEZCRjNFMTQ1MTFFN0E1MzdBQUJGN0Q5QjgxOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTIyMEZCRjRFMTQ1MTFFN0E1MzdBQUJGN0Q5QjgxOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7EXgJcAAADGElEQVR42ryXWUhUURjH7x3GIiq10jZxLLKNLGx7SGjaoChfA1/ahOZBCIIiDCtK86GCaIeiokKiMOopeooGMjRasKGMSKXFFstkSFvJmP5f/E/cLufcO07mBz/u3HvOPd/9vvMtZ+xoNGolIZPAarAQzASDHWOfwAMgC9WAZr/Fgj7jYbAfzOH9M3AZPAVdIANMBPPBDnIbbAG3eqt0ADhF62TxjaAWtHt84FhQAqpAHTgJysBP98SA5uVRoIUKN9Gawz4KRd6AA2AoKAcRunqEn6XZdKE8nw4eWanJPnADNIAnYCr4YLL0IUgDef+gUMk9EAJZDDStey/RtWLhW6tvRNYpBDngrFupROdKsJnu6EuJgV1gLZghD2zmqbg1F2Ra/096+AGzxdJxoABs93jBZtqUGMZXgQ2GbFCyDcyS1JJJpXx4zuOFZeAguAgmuMamsBIdAUs81jjOa0RSoxi8AN0eLzRzC+Kg0zX2jsVgOCuVST4y11cE6doLPvvRqoJAI3GWy2REAqhY3DuQi/aHPAfpauPf95PSLmeejjRMWg7G6wYSiYRp4XzZN8NYpqq93zURqeQa62dRL6ypZVVL04xJWewOsMYuMixwCMxjeUxGQmzyewzji0GTKL3KAp+hmbQV/AA3k1QqjfsLqNSMDePHXxGlZ/iwVDPxG1jA40oTW5ROCtiDczm/RzOnjNcaVXtjDJh0w6Kyp9fBIFAve41AarFtWwVNEZNfKtJ9wxrisbsyN+CwUjp+heGFeijJAlWMzmoolJJYLfd4vpOuMymsZNBGnF1G1d417H8xU4pAmVxG4z4bvzuktMkYn+tkLrgDToP17iYu/e41u/wYn4BpZy32OzflUGGrUqg7rhSyoL90HDv/WKisUZa5rHeLpNor0EFrjadBOTxNBm3c9PIUSl2QvVkC7jEjPu53BO3kAfoEk/wzlYd8lOUxEL+C3eAYmKZphX8FkslFe3mCt7jndewW8ndiCJWFuX8WU6uCnkrpb0UD9i2MPZMjzTom/lI2bGc/bQRHwXnMb/OI5N/yS4ABAIrSy0QECF70AAAAAElFTkSuQmCC"/>',d=this.$content.offset().top+this.$content.outerHeight()+10,e=this.$content.offset().left+2,a(b).appendTo(a("body")),a("#emoji_btn_"+j).css({top:d+"px",left:e+"px"}),i="#emoji_btn_"+j);var k=this.options.showTab,l=this.options.icons,m=l.length;if(0===m)return alert("Missing icons config!"),!1;for(var n,o,p,q,r,s,t,u,v,w,x,y='<div class="emoji_container" id="emoji_container_'+j+'">',z='<div class="emoji_content">',A='<div class="emoji_tab" style="'+(1!==m||k?"":"display:none;")+'"><div class="emoji_tab_prev"></div><div class="emoji_tab_list"><ul>',B=0;m>B;B++)if(o=l[B].name||"group"+(B+1),p=l[B].path,q=l[B].maxNum,r=l[B].excludeNums,s=l[B].file||".jpg",t=l[B].placeholder||"#em"+(B+1)+"_{alias}#",u=l[B].alias,v=l[B].title,w=0,p&&q){n='<div id="emoji'+B+'" class="emoji_icons" style="'+(0===B?"":"display:none;")+'"><ul>';for(var C=1;q>=C;C++)if(!(r&&r.indexOf(C)>=0)){if(u){if("object"!=typeof u){alert("Error config about alias!");break}x=t.replace(new RegExp("{alias}","gi"),u[C].toString())}else x=t.replace(new RegExp("{alias}","gi"),C.toString());n+='<li><a data-emoji_code="'+x+'" data-index="'+w+'" title="'+(v&&v[C]?v[C]:"")+'"><img src="'+p+C+s+'"/></a></li>',w++}n+="</ul></div>",z+=n,A+='<li data-emoji_tab="emoji'+B+'" class="'+(0===B?"selected":"")+'" title="'+o+'">'+o+"</li>"}else alert("The "+B+" index of icon groups has error config!");z+="</div>",A+='</ul></div><div class="emoji_tab_next"></div></div>';var D='<div class="emoji_preview"><img/></div>';y+=z,y+=A,y+=D,a(y).appendTo(a("body")),f=a(i).offset().top+a(i).outerHeight()+5,g=a(i).offset().left,a("#emoji_container_"+j).css({top:f+"px",left:g+"px"}),a("#emoji_container_"+j+" .emoji_content").mCustomScrollbar({theme:"minimal-dark",scrollbarPosition:"inside",mouseWheel:{scrollAmount:275}});var E=m%8===0?parseInt(m/8):parseInt(m/8)+1,F=1;a(c).on({click:function(b){var c,d,e,f,g=b.target,k=h.$content[0];g===a(i)[0]?(a("#emoji_container_"+j)[h.toggleFunc](),h.$content.focus()):a(g).parents("#emoji_container_"+j).length>0?(c=a(g).data("emoji_code")||a(g).parent().data("emoji_code"),d=a(g).data("emoji_tab"),c?("DIV"===k.nodeName?(e=a("#emoji_container_"+j+' a[data-emoji_code="'+c+'"] img').attr("src"),f='<img class="emoji_icon" src="'+e+'"/>',h._insertAtCursor(k,f,!1)):h._insertAtCursor(k,c),h.hide()):d?a(g).hasClass("selected")||(a("#emoji_container_"+j+" .emoji_icons").hide(),a("#emoji_container_"+j+" #"+d).show(),a(g).addClass("selected").siblings().removeClass("selected")):a(g).hasClass("emoji_tab_prev")?F>1&&(a("#emoji_container_"+j+" .emoji_tab_list ul").css("margin-left","-503"*(F-2)+"px"),F--):a(g).hasClass("emoji_tab_next")&&E>F&&(a("#emoji_container_"+j+" .emoji_tab_list ul").css("margin-left","-503"*F+"px"),F++),h.$content.focus()):a("#emoji_container_"+j+":visible").length>0&&(h.hide(),h.$content.focus())}}),a("#emoji_container_"+j+" .emoji_icons a").mouseenter(function(){var b=a(this).data("index");parseInt(b/5)%2===0?a("#emoji_container_"+j+" .emoji_preview").css({left:"auto",right:0}):a("#emoji_container_"+j+" .emoji_preview").css({left:0,right:"auto"});var c=a(this).find("img").attr("src");a("#emoji_container_"+j+" .emoji_preview img").attr("src",c).parent().show()}),a("#emoji_container_"+j+" .emoji_icons a").mouseleave(function(){a("#emoji_container_"+j+" .emoji_preview img").removeAttr("src").parent().hide()})},_insertAtCursor:function(a,d,e){var f,g;if("DIV"===a.nodeName){if(a.focus(),b.getSelection){if(f=b.getSelection(),f.getRangeAt&&f.rangeCount){g=f.getRangeAt(0),g.deleteContents();var h=c.createElement("div");h.innerHTML=d;for(var i,j,k=c.createDocumentFragment();i=h.firstChild;)j=k.appendChild(i);var l=k.firstChild;g.insertNode(k),j&&(g=g.cloneRange(),g.setStartAfter(j),e?g.setStartBefore(l):g.collapse(!0),f.removeAllRanges(),f.addRange(g))}}else if((f=c.selection)&&"Control"!==f.type){var m=f.createRange();m.collapse(!0),f.createRange().pasteHTML(html),e&&(g=f.createRange(),g.setEndPoint("StartToStart",m),g.select())}}else if(c.selection)a.focus(),f=c.selection.createRange(),f.text=d,f.select();else if(a.selectionStart||0===a.selectionStart){var n=a.selectionStart,o=a.selectionEnd,p=a.scrollTop;a.value=a.value.substring(0,n)+d+a.value.substring(o,a.value.length),p>0&&(a.scrollTop=p),a.focus(),a.selectionStart=n+d.length,a.selectionEnd=n+d.length}else a.value+=d,a.focus()},show:function(){a("#emoji_container_"+this.index)[this.showFunc]()},hide:function(){a("#emoji_container_"+this.index)[this.hideFunc]()},toggle:function(){a("#emoji_container_"+this.index)[this.toggleFunc]()}},a.fn[f]=e,a.fn[f].Constructor=d}(jQuery,window,document),function(a,b,c){function d(b,c){this.$content=a(b),this.options=c,this._init()}function e(b){return this.each(function(){var c=a(this),e=c.data("plugin_"+f),h=a.extend({},g,c.data(),"object"==typeof b&&b);e||c.data("plugin_"+f,e=new d(this,h)),"string"==typeof b&&e[b]()})}var f="emojiParse",g={icons:[]};d.prototype={_init:function(){var a,b,c,d,e,f,g=this,h=this.options.icons,i=h.length,j={};if(i>0)for(var k=0;i>k;k++)if(a=h[k].path,b=h[k].file||".jpg",c=h[k].placeholder,d=h[k].alias,a)if(d){for(var l in d)d.hasOwnProperty(l)&&(j[d[l]]=l);e=c.replace(new RegExp("{alias}","gi"),"([\\s\\S]+?)"),f=new RegExp(e,"gm"),g.$content.html(g.$content.html().replace(f,function(c,d){var e=j[d];return e?'<img class="emoji_icon" src="'+a+e+b+'"/>':c}))}else e=c.replace(new RegExp("{alias}","gi"),"(\\d+?)"),g.$content.html(g.$content.html().replace(new RegExp(e,"gm"),'<img class="emoji_icon" src="'+a+"$1"+b+'"/>'));else alert("Path not config!")}},a.fn[f]=e,a.fn[f].Constructor=d}(jQuery,window,document);